{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError clearing persistent alert: Cannot read properties of undefined (reading 'findOne')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'findOne')\n    at PersistentAlertsService.clearPersistentAlert (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:120:53)\n    at testOrderRoutes (/Users/sariq/project/shoofi/shoofi-server/test-order-routes.js:169:39)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 14:37:25:3725"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError getting pending orders: Cannot read properties of undefined (reading 'find')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'find')\n    at PersistentAlertsService.getPendingOrders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:195:61)\n    at testOrderRoutes (/Users/sariq/project/shoofi/shoofi-server/test-order-routes.js:200:59)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 14:37:25:3725"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError getting alert stats: Cannot read properties of undefined (reading 'aggregate')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'aggregate')\n    at PersistentAlertsService.getAlertStats (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:290:53)\n    at testOrderRoutes (/Users/sariq/project/shoofi/shoofi-server/test-order-routes.js:208:56)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 14:37:25:3725"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError sending reminders: Cannot read properties of undefined (reading 'shoofi')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'shoofi')\n    at PersistentAlertsService.sendReminders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:214:34)\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:30:41)\n    at /Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/task.js:52:23\n    at new Promise (<anonymous>)\n    at Task.update (/Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/task.js:50:7)\n    at Timeout.ScheduledTask.task [as _onTimeout] (/Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/scheduled-task.js:86:10)\n    at listOnTimeout (node:internal/timers:559:17)\n    at processTimers (node:internal/timers:502:7)","timestamp":"2025-07-04 14:50:00:500"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mFailed to send reminders for app shoofi-app: Cannot read properties of undefined (reading 'shoofi')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'shoofi')\n    at PersistentAlertsService.sendReminders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:214:34)\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:30:41)\n    at /Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/task.js:52:23\n    at new Promise (<anonymous>)\n    at Task.update (/Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/task.js:50:7)\n    at Timeout.ScheduledTask.task [as _onTimeout] (/Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/scheduled-task.js:86:10)\n    at listOnTimeout (node:internal/timers:559:17)\n    at processTimers (node:internal/timers:502:7)","timestamp":"2025-07-04 14:50:00:500"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError sending reminders: Cannot read properties of undefined (reading 'shoofi')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'shoofi')\n    at PersistentAlertsService.sendReminders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:214:34)\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:30:41)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at runNextTicks (node:internal/process/task_queues:65:3)\n    at listOnTimeout (node:internal/timers:528:9)\n    at processTimers (node:internal/timers:502:7)","timestamp":"2025-07-04 14:50:00:500"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mFailed to send reminders for app shoofi-shoofir: Cannot read properties of undefined (reading 'shoofi')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'shoofi')\n    at PersistentAlertsService.sendReminders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:214:34)\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:30:41)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at runNextTicks (node:internal/process/task_queues:65:3)\n    at listOnTimeout (node:internal/timers:528:9)\n    at processTimers (node:internal/timers:502:7)","timestamp":"2025-07-04 14:50:00:500"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError sending reminders: Cannot read properties of undefined (reading 'shoofi')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'shoofi')\n    at PersistentAlertsService.sendReminders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:214:34)\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:30:41)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at runNextTicks (node:internal/process/task_queues:65:3)\n    at listOnTimeout (node:internal/timers:528:9)\n    at processTimers (node:internal/timers:502:7)","timestamp":"2025-07-04 14:50:00:500"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mFailed to send reminders for app shoofi-partner: Cannot read properties of undefined (reading 'shoofi')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'shoofi')\n    at PersistentAlertsService.sendReminders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:214:34)\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:30:41)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at runNextTicks (node:internal/process/task_queues:65:3)\n    at listOnTimeout (node:internal/timers:528:9)\n    at processTimers (node:internal/timers:502:7)","timestamp":"2025-07-04 14:50:00:500"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError sending reminders: Cannot read properties of undefined (reading 'shoofi')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'shoofi')\n    at PersistentAlertsService.sendReminders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:214:34)\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:30:41)\n    at /Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/task.js:52:23\n    at new Promise (<anonymous>)\n    at Task.update (/Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/task.js:50:7)\n    at Timeout.ScheduledTask.task [as _onTimeout] (/Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/scheduled-task.js:86:10)\n    at listOnTimeout (node:internal/timers:559:17)\n    at processTimers (node:internal/timers:502:7)","timestamp":"2025-07-04 14:51:00:510"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mFailed to send reminders for app shoofi-app: Cannot read properties of undefined (reading 'shoofi')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'shoofi')\n    at PersistentAlertsService.sendReminders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:214:34)\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:30:41)\n    at /Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/task.js:52:23\n    at new Promise (<anonymous>)\n    at Task.update (/Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/task.js:50:7)\n    at Timeout.ScheduledTask.task [as _onTimeout] (/Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/scheduled-task.js:86:10)\n    at listOnTimeout (node:internal/timers:559:17)\n    at processTimers (node:internal/timers:502:7)","timestamp":"2025-07-04 14:51:00:510"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError sending reminders: Cannot read properties of undefined (reading 'shoofi')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'shoofi')\n    at PersistentAlertsService.sendReminders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:214:34)\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:30:41)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at runNextTicks (node:internal/process/task_queues:65:3)\n    at listOnTimeout (node:internal/timers:528:9)\n    at processTimers (node:internal/timers:502:7)","timestamp":"2025-07-04 14:51:00:510"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mFailed to send reminders for app shoofi-shoofir: Cannot read properties of undefined (reading 'shoofi')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'shoofi')\n    at PersistentAlertsService.sendReminders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:214:34)\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:30:41)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at runNextTicks (node:internal/process/task_queues:65:3)\n    at listOnTimeout (node:internal/timers:528:9)\n    at processTimers (node:internal/timers:502:7)","timestamp":"2025-07-04 14:51:00:510"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError sending reminders: Cannot read properties of undefined (reading 'shoofi')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'shoofi')\n    at PersistentAlertsService.sendReminders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:214:34)\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:30:41)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at runNextTicks (node:internal/process/task_queues:65:3)\n    at listOnTimeout (node:internal/timers:528:9)\n    at processTimers (node:internal/timers:502:7)","timestamp":"2025-07-04 14:51:00:510"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mFailed to send reminders for app shoofi-partner: Cannot read properties of undefined (reading 'shoofi')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'shoofi')\n    at PersistentAlertsService.sendReminders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:214:34)\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:30:41)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at runNextTicks (node:internal/process/task_queues:65:3)\n    at listOnTimeout (node:internal/timers:528:9)\n    at processTimers (node:internal/timers:502:7)","timestamp":"2025-07-04 14:51:00:510"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError sending reminders: Cannot read properties of undefined (reading 'shoofi')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'shoofi')\n    at PersistentAlertsService.sendReminders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:213:34)\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:28:41)\n    at /Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/task.js:52:23\n    at new Promise (<anonymous>)\n    at Task.update (/Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/task.js:50:7)\n    at Timeout.ScheduledTask.task [as _onTimeout] (/Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/scheduled-task.js:86:10)\n    at listOnTimeout (node:internal/timers:559:17)\n    at processTimers (node:internal/timers:502:7)","timestamp":"2025-07-04 14:57:03:573"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mFailed to send reminders for persistent alerts: Cannot read properties of undefined (reading 'shoofi')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'shoofi')\n    at PersistentAlertsService.sendReminders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:213:34)\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:28:41)\n    at /Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/task.js:52:23\n    at new Promise (<anonymous>)\n    at Task.update (/Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/task.js:50:7)\n    at Timeout.ScheduledTask.task [as _onTimeout] (/Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/scheduled-task.js:86:10)\n    at listOnTimeout (node:internal/timers:559:17)\n    at processTimers (node:internal/timers:502:7)","timestamp":"2025-07-04 14:57:03:573"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError sending reminders: Cannot read properties of undefined (reading 'shoofi')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'shoofi')\n    at PersistentAlertsService.sendReminders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:213:34)\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:28:41)\n    at /Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/task.js:52:23\n    at new Promise (<anonymous>)\n    at Task.update (/Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/task.js:50:7)\n    at Timeout.ScheduledTask.task [as _onTimeout] (/Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/scheduled-task.js:86:10)\n    at listOnTimeout (node:internal/timers:559:17)\n    at processTimers (node:internal/timers:502:7)","timestamp":"2025-07-04 14:58:38:5838"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mFailed to send reminders for persistent alerts: Cannot read properties of undefined (reading 'shoofi')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'shoofi')\n    at PersistentAlertsService.sendReminders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:213:34)\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:28:41)\n    at /Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/task.js:52:23\n    at new Promise (<anonymous>)\n    at Task.update (/Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/task.js:50:7)\n    at Timeout.ScheduledTask.task [as _onTimeout] (/Users/sariq/project/shoofi/shoofi-server/node_modules/node-cron/src/scheduled-task.js:86:10)\n    at listOnTimeout (node:internal/timers:559:17)\n    at processTimers (node:internal/timers:502:7)","timestamp":"2025-07-04 14:58:38:5838"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError sending reminders: req is not defined\u001b[39m","stack":"ReferenceError: req is not defined\n    at /Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:250:13\n    at Array.map (<anonymous>)\n    at PersistentAlertsService.sendReminders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:233:45)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:27:11)","timestamp":"2025-07-04 15:01:17:117"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mFailed to send reminders for persistent alerts: req is not defined\u001b[39m","stack":"ReferenceError: req is not defined\n    at /Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:250:13\n    at Array.map (<anonymous>)\n    at PersistentAlertsService.sendReminders (/Users/sariq/project/shoofi/shoofi-server/utils/persistent-alerts.js:233:45)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:27:11)","timestamp":"2025-07-04 15:01:17:117"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError in persistent alerts cleanup cron job: appName is not defined\u001b[39m","stack":"ReferenceError: appName is not defined\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:66:60)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 15:21:50:2150"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError in persistent alerts cleanup cron job: appName is not defined\u001b[39m","stack":"ReferenceError: appName is not defined\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:66:60)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 15:23:00:230"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError in persistent alerts cleanup cron job: appName is not defined\u001b[39m","stack":"ReferenceError: appName is not defined\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:66:60)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 15:29:00:290"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError in persistent alerts cleanup cron job: appName is not defined\u001b[39m","stack":"ReferenceError: appName is not defined\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:66:60)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 15:32:00:320"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError in persistent alerts cleanup cron job: appName is not defined\u001b[39m","stack":"ReferenceError: appName is not defined\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:66:60)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 15:44:00:440"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError in persistent alerts cleanup cron job: appName is not defined\u001b[39m","stack":"ReferenceError: appName is not defined\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:66:60)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 15:50:00:500"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError in persistent alerts cleanup cron job: appName is not defined\u001b[39m","stack":"ReferenceError: appName is not defined\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:66:60)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 16:07:00:70"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError in persistent alerts cleanup cron job: appName is not defined\u001b[39m","stack":"ReferenceError: appName is not defined\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:66:60)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 16:13:00:130"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError in persistent alerts cleanup cron job: appName is not defined\u001b[39m","stack":"ReferenceError: appName is not defined\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:66:60)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 16:19:00:190"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError in persistent alerts cleanup cron job: appName is not defined\u001b[39m","stack":"ReferenceError: appName is not defined\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:66:60)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 16:25:00:250"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError in persistent alerts cleanup cron job: appName is not defined\u001b[39m","stack":"ReferenceError: appName is not defined\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:66:60)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 16:31:00:310"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError in persistent alerts cleanup cron job: appName is not defined\u001b[39m","stack":"ReferenceError: appName is not defined\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:66:60)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 16:37:00:370"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError in persistent alerts cleanup cron job: appName is not defined\u001b[39m","stack":"ReferenceError: appName is not defined\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:66:60)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 16:43:00:430"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError in persistent alerts cleanup cron job: appName is not defined\u001b[39m","stack":"ReferenceError: appName is not defined\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:66:60)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 16:49:00:490"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError in persistent alerts cleanup cron job: appName is not defined\u001b[39m","stack":"ReferenceError: appName is not defined\n    at Task.cron.schedule.scheduled [as execution] (/Users/sariq/project/shoofi/shoofi-server/utils/crons/persistent-alerts-cron.js:66:60)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 16:55:00:550"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError sending notification: Cannot read properties of null (reading 'app')\u001b[39m","stack":"TypeError: Cannot read properties of null (reading 'app')\n    at getCustomerByAppType (/Users/sariq/project/shoofi/shoofi-server/services/notification/notification-service.js:15:28)\n    at NotificationService.sendNotification (/Users/sariq/project/shoofi/shoofi-server/services/notification/notification-service.js:69:64)\n    at testDeliveryNotifications (/Users/sariq/project/shoofi/shoofi-server/test-delivery-notifications.js:106:58)\n    at runTests (/Users/sariq/project/shoofi/shoofi-server/test-delivery-notifications.js:311:11)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 17:30:33:3033"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError sending notification: Cannot read properties of undefined (reading 'findOne')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'findOne')\n    at getCustomerByAppType (/Users/sariq/project/shoofi/shoofi-server/services/notification/notification-service.js:16:43)\n    at NotificationService.sendNotification (/Users/sariq/project/shoofi/shoofi-server/services/notification/notification-service.js:69:64)\n    at testDeliveryNotifications (/Users/sariq/project/shoofi/shoofi-server/test-delivery-notifications.js:106:58)\n    at runTests (/Users/sariq/project/shoofi/shoofi-server/test-delivery-notifications.js:335:11)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","timestamp":"2025-07-04 17:32:10:3210"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError sending notification: Cannot read properties of null (reading 'app')\u001b[39m","stack":"TypeError: Cannot read properties of null (reading 'app')\n    at getCustomerByAppType (/Users/sariq/project/shoofi/shoofi-server/services/notification/notification-service.js:15:28)\n    at NotificationService.sendNotification (/Users/sariq/project/shoofi/shoofi-server/services/notification/notification-service.js:69:64)\n    at Object.bookDelivery (/Users/sariq/project/shoofi/shoofi-server/services/delivery/book-delivery.js:66:35)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async testDeliveryBooking (/Users/sariq/project/shoofi/shoofi-server/simple-delivery-test.js:205:20)\n    at async runTest (/Users/sariq/project/shoofi/shoofi-server/simple-delivery-test.js:271:5)","timestamp":"2025-07-04 17:46:56:4656"}
